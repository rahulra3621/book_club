<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BookClub - Homepage</title>
    <link rel="stylesheet" href="/css/index.css">
</head>

<body>
    <nav>
        <a href="/home">Book Club</a>
        <a href="/profile">
            <%=user.username%>
        </a>
        <a href="/mybooks">My Books</a>
        <a href="/logout">Log Out</a>
    </nav>
    <main>
        <form action="/search" method="GET">
            <input type="text" name="q" id="search-in" value="<%=searchInp%>" placeholder="Search books, authors, publishers...">
            <button type="submit" onclick="search()">Search</button>
        </form>
        <% if (searchInp) { %>
            <p>Displaying Search Result: <%=searchInp%></p>
        <% } %>
        <h1>Books</h1>
        <% if (err && books.length==0) { %>
            <p class="error">
                <%=err%>
            </p>
        <% } %>
        <% let count=1 %>
            <div class="grid">
                <% for (const book of books) { %>
                    <div class="card">
                        <% if (err && book.id==id) { %>
                            <p class="error">
                                <%=err%>
                            </p>
                            <% } %>
                                <h4>
                                    <%=book.bookName%>
                                </h4>
                                <p class="muted-block">by <strong>
                                        <%=book.bookAuthor%>
                                    </strong></p>
                                <p class="muted-block">Publisher: <%=book.bookPublisher%>
                                </p>
                                <p><strong>Price:</strong> â‚¹<%=book.bookPrice%></p>
                                <div class="actions">
                                    <a class="btn" href="/home/rent/<%=book._id%>">Rent</a>
                                </div>
                    </div>
                    <%count++%>
                        <% } %>
            </div>
    </main>

    <script>
        window.addEventListener("pageshow", (event) => {
            if (event.persisted) {
                window.location.reload();
            }
        });
        <!-- function search(){
            let searchinp = document.getElementById('search-in');
            let val = searchinp.value;
            searchinp.value = val;
            let searchword = document.getElementById('search-res-word');
            searchword.textContent=`Displaying Search Result: ${val}`;
            searchword.style.display = 'block';
        } -->
    </script>

</body>

</html>